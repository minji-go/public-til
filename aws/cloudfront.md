
## CloudFront
```
- ì›¹í˜ì´ì§€, ì´ë¯¸ì§€, ë™ì˜ìƒ ë“±ì˜ ì»¨í…ì¸ ë¥¼ ë³¸ë˜ ì„œë²„ì—ì„œ ë°›ì•„ì™€ ìºì‹±
- í•´ë‹¹ ì»¨í…ì¸ ì— ëŒ€í•œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ìºì‹±í•´ë‘” ì»¨í…ì¸ ë¥¼ ì œê³µ
- ì»¨í…ì¸ ë¥¼ ì œê³µí•˜ëŠ” ì„œë²„ì™€ ì‹¤ì œ ìš”ì²­ ì§€ì  ê°„ì˜ ì§€ë¦¬ì  ê±°ë¦¬ê°€ ë§¤ìš° ë¨¼ ê²½ìš° í˜¹ì€ í†µì‹  í™˜ê²½ì´ ì•ˆì¢‹ì€ ê²½ìš°, ìš”ì²­ì§€ì  ê·¼ì²˜ì˜ CDNì„ í†µí•´ ë¹ ë¥´ê²Œ ì»¨í…ì¸  ì œê³µ ê°€ëŠ¥
- ì„œë²„ë¡œ ìš”ì²­ì´ í•„ìš” ì—†ê¸° ë•Œë¬¸ì— ì„œë²„ì˜ ë¶€í•˜ë¥¼ ë‚®ì¶”ëŠ” íš¨ê³¼
```

##### ğŸ’¡ ì£¼ìš” ì„¤ì • ë° ìš©ì–´
```
Origin: ì‹¤ì œ ì»¨í…ì¸ ê°€ ì¡´ì¬í•˜ëŠ” ê·¼ì›
- AWS ì„œë¹„ìŠ¤ (EC2, ELB, S3 ë“±)
- ì˜¨í”„ë ˆë¯¸ìŠ¤ ì„œë²„

ì—£ì§€ ë¡œì¼€ì´ì…˜ : ì»¨í…ì¸ ê°€ ìºì‹±ë˜ê³  ìœ ì €ì—ê²Œ ì œê³µë˜ëŠ” ì§€ì 
- ìš”ì²­ ë°›ì€ ì»¨í…ì¸ ê°€ ì—£ì§€ ë¡œì¼€ì´ì…˜ì— ìˆë‹¤ë©´, ë°”ë¡œ ì „ë‹¬
- ìš”ì²­ ë°›ì€ ì»¨í…ì¸ ê°€ ì—£ì§€ ë¡œì¼€ì´ì…˜ì— ì—†ë‹¤ë©´, ì»¨í…ì¸ ë¥¼ ì œê³µí•˜ëŠ” ê·¼ì›ì—ì„œ ì œê³µë°›ì•„ ì „ë‹¬

Distribution : CloudFrontì˜ CDN êµ¬ë¶„ ë‹¨ìœ„ë¡œ, ì—¬ëŸ¬ ì—£ì§€ ë¡œì¼€ì´ì…˜ìœ¼ë¡œ êµ¬ì„±ëœ ì»¨í…ì¸  ì œê³µ ì±„ë„
```
```
- TTL(Time To Live): ìºì‹±ëœ ì•„ì´í…œì´ ì‚´ì•„ ìˆëŠ” ì‹œê°„ -> TTL ì´ˆ ì´í›„ ìºì‹±ì—ì„œ ì‚­ì œ
- íŒŒì¼ ë¬´íš¨í™”(invalidate) : TTLì´ ì§€ë‚˜ê¸° ì „ì— ê°•ì œë¡œ ìºì‹œë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒ
    - ì£¼ë¡œ ìƒˆë¡œìš´ íŒŒì¼ì„ ì—…ë°ì´íŠ¸ í•œ í›„ TTLì„ ê¸°ë‹¤ë¦¬ì§€ ëª»í•  ìƒí™©ì— ì‚¬ìš©
    - ë¹„ìš© ë°œìƒ (í•œë‹¬ì— 1000ê±´ì€ ë¬´ë£Œ)
    - CloudFront API, ì½˜ì†”, Third-Party íˆ´ ë“±ì„ í†µí•´ ë¬´íš¨í™” ê°€ëŠ¥

- Cache Key
    - ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì»¨í…ì¸ ë¥¼ ìºì‹±í•  ê²ƒì¸ì§€ ê²°ì •
    - ê¸°ë³¸ì ìœ¼ë¡œ URL
    - ì´í›„ Headerì™€ Cookie, ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ë“±ì„ ì‚¬ìš© ê°€ëŠ¥
```
##### ğŸ’¡ ì •ì±…
```
    - CloudFrontê°€ ë™ì‘í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•œ ì •ì±…
    - ì´ 3ê°€ì§€ ì •ì±… ì„¤ì • ê°€ëŠ¥

    - Cache Conrol : ìºì‹± ë°©ë²• ë° ì••ì¶•
        - TTL ë° Cache Key ì •ì±…
        - CloudFrontê°€ ì–´ë–»ê²Œ ìºì‹±ì„ í• ì§€ë¥¼ ê²°ì •
    
    - Origin Request : Originìœ¼ë¡œ ì–´ë–¤ ë‚´ìš©ì„ ë³´ë‚¼ ê²ƒì¸ê°€
        - Originì— ì¿ í‚¤, í—¤ë”, ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì¤‘ ì–´ë–¤ ê²ƒì„ ë³´ë‚¼ ê²ƒì¸ê°€
    
    - ë·°ì–´ì—ê²Œ ë³´ë‚¼ HTTP header
        - CloudFrontê°€ ë·°ì–´ì—ê²Œ ì‘ë‹µê³¼ ê°™ì´ ì‹¤ì–´ë³´ë‚¼ HTTP Header\
        - CloudFrontì—ì„œ ë·°ì–´ì˜ ì •ë³´ë¥¼ í—¤ë”ì— ë”í•´ Originì— ì „ì†¡
        - í™•ì¸ ê°€ëŠ¥í•œ ë·°ì–´ì˜ ì •ë³´
            - ë””ë°”ì´ìŠ¤ íƒ€ì… : Android/IOS/SmartTV/Tablet/Desktop
            - IP Address
            - Country/ë„ì‹œ/ìœ„ë„ ê²½ë„, íƒ€ì„ì¡´ ë“±
```

```
CDN : ì»¨í…ì¸ ë¥¼ ìµœì í™”í•˜ì—¬ ë³´ë‹¤ ë¹ ë¥´ê²Œ ìœ ì €ì—ê²Œ ì œê³µ
- ì •ì /ë™ì  ì»¨í…ì¸  ëª¨ë‘ ìµœì í™”

- ì •ì (Static) ì»¨í…ì¸  : ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ ë³´ì—¬ì£¼ëŠ” ë‚´ìš©
    - ì´ë¯¸ì§€,  CSS, ê¸°íƒ€ ì„œë²„ê°€ í•„ìš” ì—†ëŠ” ë‚´ìš©ë“¤
    - ìºì‹±ìœ¼ë¡œ ì ‘ê·¼ ì†ë„ ìµœì í™”

- ë™ì (Dynamic) ì»¨í…ì¸ : ì„œë²„ ê³„ì‚°, DBì¡°íšŒ ë“±ì´ í•„ìš”í•œ ë‚´ìš©
    - ë¡œê·¸ì¸, ê²Œì‹œíŒ
    - ë„¤íŠ¸ì›Œí¬ ìµœì í™”, ì—°ê²° ìœ ì§€, Gzip ì••ì¶• ë“±ì„ ì‚¬ìš©
        - Content Download ì´ì „ ë‹¨ê³„ì¸ DNS Lookup, TCP Connection, Time to First Byte ë“±ì„ ìµœì í™”

HTTPS ì§€ì›
    - Originì—ì„œ HTTPSë¥¼ ì§€ì›í•˜ì§€ ì•Šë”ë¼ë„ HTTPS í†µì‹ ì„ ì§€ì›í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„± ê°€ëŠ¥

ì§€ë¦¬ì  ì œí•œ : íŠ¹ì • ì§€ì—­ì˜ ì»¨í…ì¸  ì ‘ê·¼ì„ ì œí•œ ê°€ëŠ¥

ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ì—°ê³„
    - AWS WAF, Lambda@Edge ë“±ê³¼ ì—°ë™ ê°€ëŠ¥

Lambda@Edge
- ëŒë‹¤ë¥¼ ì‚¬ìš©
- ì‚¬ìš© ì‚¬ë¡€
    - ì˜ˆ: í•œêµ­ì—ì„œ ìš”ì²­ì´ ì˜¬ ê²½ìš° í•œêµ­ ì›¹ì„œë²„, ë¯¸êµ­ì—ì„œ ì˜¬ ê²½ìš° ë¯¸êµ­ ì›¹ ì„œë²„ë¡œ ë¶„ì‚°
    - ì»¤ìŠ¤í…€ ì—ëŸ¬ í˜ì´ì§€
    - Cookieë¥¼ ê²€ì‚¬í•´ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŒ… => A/B í…ŒìŠ¤íŒ…
    - CloudFrontì—ì„œ Originì— ë„ì°© ì´ì „ì— ì¸ì¦ ë“±

CloudFront Function
- Lambda@edge 1/6ì˜ ë¹„ìš©ìœ¼ë¡œ ê²½ëŸ‰ javascript ì‹¤í–‰
- ì‚¬ìš©ì‚¬ë¡€: ìºì‹±, í—¤ë” ì¡°ì‘ ë“±

ì£¼ìš” CloudFront ì´ìš© ì§€í‘œ í™•ì¸ ê°€ëŠ¥
- ìºì‹œ ìƒíƒœ
- ê°€ì¥ ë§ì´ ìš”ì²­ ë°›ì€ ì»¨í…ì¸ 
- Top Referrer
```

##### ğŸ’¡ ë³´ì•ˆ
```
- Signed URL : ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ CloudFrontì˜ ì»¨í…ì¸ ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” URLì„ ì œê³µí•˜ì—¬ ì»¨í…ì¸  ì œê³µì„ ì œì–´í•˜ëŠ” ë°©ë²•
    - URLì—ëŠ” ì‹œì‘ì‹œê°„, ì¢…ë£Œì‹œê°„, IP, íŒŒì¼ëª…, URLì˜ ìœ íš¨ê¸°ê°„ ë“±ì˜ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŒ
    - ì´ URL ì ‘ê·¼ ì´ì™¸ì˜ ì ‘ê·¼ì„ ë§‰ê³  í—ˆìš©ëœ ìœ ì €ì—ê²Œë§Œ URLì„ ì „ë‹¬í•˜ì—¬ ì»¨í…ì¸  ì œê³µì„ ì œì–´ ê°€ëŠ¥
    - ë‹¨ í•˜ë‚˜ì˜ íŒŒì¼ ë˜ëŠ” ì»¨í…ì¸ ì— ëŒ€í•œ í—ˆìš©ë§Œ ê°€ëŠ¥
    - S3 Signed URLê³¼ ë¹„ìŠ·í•œ ë°©ì‹

- Signed Cookie: ë‹¤ìˆ˜ì˜ ì»¨í…ì¸ ì˜ ì œê³µ ë°©ì‹ì„ ì œì–´í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
    - Signed URLê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì—¬ëŸ¬ ì œì•½ ì‚¬í•­ ì„¤ì • ê°€ëŠ¥
    - ë‹¤ìˆ˜ì˜ íŒŒì¼ ë° ìŠ¤íŠ¸ë¦¬ë° ì ‘ê·¼ í—ˆìš© ê°€ëŠ¥

- ì‚¬ìš© ì‚¬ë¡€ : í”„ë¦¬ë¯¸ì—„ ìœ ì €ë§Œ ë³¼ ìˆ˜ ìˆëŠ” ê°•ì˜ ë™ì˜ìƒ ë“±

- Origin Access Identity
    - S3ì˜ ì»¨í…ì¸ ë¥¼ CloudFrontë¥¼ ì‚¬ìš©í•´ì„œë§Œ ë³¼ ìˆ˜ ìˆë„ë¡ ì œí•œ í•˜ëŠ” ë°©ë²•
    - CloudFrontë§Œ ê¶Œí•œì„ ê°€ì§€ê³  S3ì— ì ‘ê·¼í•˜ê³  ë‚˜ë¨¸ì§€ ì ‘ê·¼ê¶Œí•œì€ ë§‰ìŒ
    - S3 Bucket Policyë¡œ CloudFrontì˜ ì ‘ê·¼ì„ í—ˆìš©í•´ì•¼ ì‚¬ìš© ê°€ëŠ¥

- Field Level Encryption
    - CloudFrontë¡œë¶€í„° Originì‚¬ì´ì˜ í†µì‹ ì„ ì•”í˜¸í™”
    - ìµœëŒ€ 10ê°œì˜ í•„ë“œê¹Œì§€
    - ê³µê°œí‚¤ ë°©ì‹ìœ¼ë¡œ ì•”í˜¸í™” -> CloudFrontì— ê³µê°œí‚¤ë¥¼ ì œê³µ í›„ Originì—ì„œ Private Keyë¡œ í•´ë…
```

---
## Reference
- ğŸ“½ï¸Youtube_ [[AWS ì‹¬í™” ê°•ì¢Œ]Amazon CloudFront (1)](https://www.youtube.com/watch?v=6C9284C-zP4)
